<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/blog.css">
</head>
<body data-loggedin="<%= user ? 'true' : 'false' %>">
    <!-- Navbar -->
    <nav>
        <div class="container">
            <div class="nav-con">
                <div class="logo">
                    <a href="">Navbar</a>
                </div>
                <ul class="menu">
                    <li><a href="">menu#1</a></li>
                    <li><a href="">menu#1</a></li>
                    <li><a href="">menu#1</a></li>
                    <li><a href="">menu#1</a></li>
                    <li>
                        <input type="text" class="nav-search-box" />
                        <a href="">üîç</a>
                    </li>
                    <li>
                        <% if (!user) { %>
                        <div class="auth-box">
                            <li><a href="/login">Login</a></li>
                            <li><a href="/register">Register</a></li>
                        </div>
                        <% } %>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="box">
            <% if (user) { %>
            <!-- Blog Form -->
            <form id="upload-form" action="/post-blog" method="post" class="form-container hidden" enctype="multipart/form-data">
                <h2>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÉ‡∏´‡∏°‡πà</h2>
                <div class="form-group">
                    <label>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏Å</label>
                    <input name="imageProfileBlog" type="file" accept="image/*" required>
                </div>
                <div class="form-group">
                    <label>‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ö‡∏•‡πá‡∏≠‡∏Å</label>
                    <input name="title" type="text" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠" required>
                </div>
                <div class="form-group">
                    <label>‡πÅ‡∏ó‡πá‡∏Å (‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢ , )</label>
                    <input name="tag" type="text" placeholder="‡πÄ‡∏ä‡πà‡∏ô backend, nodejs, tutorial" required>
                </div>
                <div class="form-group">
                    <label>‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏•‡πà‡∏≤‡∏ß‡∏Ñ‡∏•‡πà‡∏≤‡∏ß</label>
                    <textarea name="short_explain" rows="10" placeholder="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°..." required></textarea>
                </div>
                <div class="form-buttons">
                    <button type="submit" class="next-btn">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
                </div>
            </form>
            <% } %>

            <!-- Blog List -->
            <div id="blog-list"></div>

            <!-- Image Modal -->
            <div id="image-modal">
                <img id="modal-img" src="" >
            </div>

            <!-- Floating Button -->
            <div id="create-post-btn" class="create-sticky-note">
                Create Blog
            </div>
        </div>
    </section>

    <!-- Content Section -->
    <section class="content">
        <div class="box">
            <p>‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á‡∏°‡∏≤‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô</p>
            <p>‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...</p>
        </div>
    </section>

    <!-- Scripts -->
    <script src="/js/loadPost.js" defer></script>
    <script src="/js/toggleForm.js" defer></script>

    <script>
        // Modal functions
        function showModal(imageSrc) {
            const modal = document.getElementById('image-modal');
            const modalImage = document.getElementById('modal-img');
            modalImage.src = imageSrc;
            modal.style.display = 'flex';
        }

        function hideModal() {
            const modal = document.getElementById('image-modal');
            modal.style.display = 'none';
        }

        // Wait for page to load
        document.addEventListener('DOMContentLoaded', function () {
            // Add event listener to modal to close on click
            document.getElementById('image-modal').addEventListener('click', hideModal);

            // Observe #blog-list for new .thumb images
            const blogList = document.getElementById('blog-list');
            const observer = new MutationObserver(() => {
                document.querySelectorAll('.thumb').forEach(img => {
                    img.onclick = () => showModal(img.src);
                });
            });

            observer.observe(blogList, { childList: true, subtree: true });
        });
    </script>
</body>
</html>
